model Subscription {
  id                   Int       @id @default(autoincrement())
  userId               String       @unique
  stripeCustomerId     String    @unique
  stripeSubscriptionId String?   @unique
  status               String
  planId               String?
  currentPeriodEnd     DateTime?
  cancelAtPeriodEnd    Boolean   @default(false)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @default(now()) @updatedAt
  user                 User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([stripeCustomerId])
  @@index([stripeSubscriptionId])
}

model PaymentHistory {
  id              Int      @id @default(autoincrement())
  userId          String
  stripePaymentId String   @unique
  amount          Int
  currency        String
  status          String
  createdAt       DateTime @default(now())
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}
